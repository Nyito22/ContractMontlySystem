@model List<ContractMontlySystem.Models.Claims>

<link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
@Html.Partial("_MenuNavigation")

<div class="ManagerMessage">
    <h1>Final Claim Approval</h1>
    <p>
        Below is a list of claims reviewed by coordinators. As the Academic Manager, you may approve or reject each claim.
    </p>
</div>

<form asp-action="UpdateFinalApproval" method="post">
    <table class="claims-table">
        <thead>
            <tr>
                <th>Claim ID</th>
                <th>Lecturer</th>
                <th>Module</th>
                <th>Hours</th>
                <th>From</th>
                <th>To</th>
                <th>Status</th>
                <th>Final Decision</th>
                <th>Manager Comment</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var claim in Model)
            {
                <tr>
                    <td>@claim.ClaimId</td>
                    <td>@claim.LectureName</td>
                    <td>@claim.ModuleName</td>
                    <td>@claim.SessionHours</td>
                    <td>@claim.ClaimFrom.ToShortDateString()</td>
                    <td>@claim.ClaimTo.ToShortDateString()</td>
                    <td>@claim.Claim_Status</td>
                    <td>
                        <select name="FinalStatuses[@claim.ClaimId]" class="form-control">
                            <option value="">Select</option>
                            <option value="Approved">Approve</option>
                            <option value="Rejected">Reject</option>
                        </select>
                    </td>
                    <td>
                        <input type="text" name="ManagerComments[@claim.ClaimId]" placeholder="Manager comment..." class="form-control" />
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <button type="submit" class="btn btn-primary">Update Statuses</button>
</form>

<div class="copyright">
    <footer>
        <p>&copy; 2025 Contract Monthly Claim System. All rights reserved.</p>
    </footer>
</div>
